/* Shield UI 1.7.27 Trial Version | Copyright 2013-2016 Shield UI Ltd. | http://www.shieldui.com/eula */
!function(a,b,_,d){var K,G,F=b.ui.Widget,w=(b.Class,b.DataSource),Q=b.RecursiveDataSource,p=(b.ui.Position,b.Constants.KeyCode),I=document,c=a.proxy,W=a.each,V=(a.extend,b.error),m=b.format,f=b.is.defined,o=b.is["boolean"],e=(b.is.integer,b.is.func),n=b.is.array,T=b.is.object,x=b.is.string,v=b.support.browser,B="click",Y="dbl"+B,S="focus",R="blur",s="change",$="keydown",Z="mousedown",P="tabindex",H="disabled",N="up",M="down",U="left",X="right",h="checked",g="li",k="ul",z="visibility",O="hidden",J="visible",j="sui-treeview-list-item",L="sui-treeview-list-item-idx",D="sui-treeview-list-item-parent",C="sui-treeview-list-item-ds",y="sui-treeview-list-items-ds",l="sui-treeview-list-item-checked",t="sui-treeview-list-item-loaded",r="sui-treeview-item-list-expanded",u="sui-treeview-item-toggle-loading",A="sui-treeview-item-selected",E="sui-treeview-item-active",q="sui-treeview-item-disabled",i="sui-treeview-item";K={cls:d,width:d,minWidth:d,height:d,dataSource:d,readDataSource:!0,animation:{enabled:!0,expandDuration:200,collapseDuration:150},checkboxes:{enabled:!1,children:!1,template:d},dragDrop:!1,dragDropScope:d,textTemplate:"{text}",hrefTemplate:"{href}",expandedTemplate:"{expanded}",checkedTemplate:"{checked}",disabledTemplate:"{disabled}",iconUrlTemplate:"{iconUrl}",iconClsTemplate:"{iconCls}",hasChildrenTemplate:function(a){return a&&(a.items&&a.items.length>0||a.hasChildren)},events:{}},G=F.extend({init:function(){F.fn.init.apply(this,arguments);var d,l,i,n,j,h,b=this,m=a(b.element),e=b.options,q=e.dieOnError,o=e.dataSource,p=e.cls;if(b._original=d=a(b.element),b._tagname=n=d.prop("tagName").toLowerCase(),h=b._eventNS=".shieldTreeView"+b.getInstanceId(),b._wrapper=i=d.wrap("<div/>").parent(),i.addClass("sui-treeview"+(p?" "+p:"")),d.hide(),b.element=m=a('<ul class="sui-treeview-list"/>').on(S+h,c(b._focus,b)).on(R+h,c(b._blur,b)).on($+h,c(b._keydown,b)),d.after(m),W(["width","minWidth","height","maxHeight"],function(b,a){f(e[a])&&i.css(a,e[a])}),l=d.attr(P),m.attr(P,f(l)?l:"0"),o)b.dataSource=w.create(o);else{if(n!=k)return b.destroy(),void V("shieldTreeView: No dataSource or underlying UL element found.",q);j=function(c){var b=[];return a(c).children(g).each(function(){var e,c=a(this),g=c.children(k).length>0,d={cls:c.attr("data-class"),href:c.attr("data-href")?c.attr("data-href"):c.children().not(k).first().attr("href"),disabled:c.attr("data-disabled")?c.attr("data-disabled"):f(c.attr(H))&&null!==c.attr(H),expanded:c.attr("data-expanded"),checked:c.attr("data-checked"),iconUrl:c.attr("data-icon-url"),iconCls:c.attr("data-icon-cls")};g?(e=c.clone(),e.children(k).remove(),d.text=e.html()):d.text=c.html(),g&&(d.items=j(c.children(k)[0])),b.push(d)}),b},b.dataSource=w.create({data:d,schema:{parse:j}})}b.dataSource.on(s+h,c(b._dsChange,b)),e.readDataSource&&b.dataSource.read()},refresh:function(a){this.refreshWithElement(this._original,a)},_dsChange:function(){var a=this,c=a.element,b=a.dataSource;a._renderItems(b,c,null,!0,!0,function(){a.trigger("dataBound",{dataSource:b,element:null})})},_destroyItems:function(b){var c=this;a(b).children("ul.sui-treeview-item-list").each(function(){c._destroyItems(a(this))}),a(b).children(".sui-treeview-item-content").find(".sui-treeview-item-text").each(function(){a(this).swidget("Draggable")&&a(this).swidget("Draggable").destroy(),a(this).swidget("Droppable")&&a(this).swidget("Droppable").destroy()}),a(b).children(".sui-treeview-item-content").find(".sui-checkbox").each(function(){a(this).swidget("CheckBox")&&a(this).swidget("CheckBox").destroy()});var d=a(b).data(y);d&&d.off(c._eventNS),a(b).removeData(),a(b).empty()},_renderItems:function(l,i,q,n,m,h){var d,c,a,b=this,o=b.options,j=o.checkboxes,k=l.view,p=(k||[]).length,f=[],g=[];for(b._destroyItems(i),a=0;p>a;a++)d=b._renderItem(k[a],q,l,a),c=d.listItem,c.appendTo(i),d.itemExpanded&&f.push(c),d.itemChecked&&g.push(c);if(e(h)&&h(),n)for(a=0;a<f.length;a++)b._expand(f[a],!1,m);if(j.enabled&&j.children)for(a=0;a<g.length;a++)b._updateChecked(g[a])},_renderItem:function(k,G,T,Q){var n,s,p,t,u,v,h,J,w,E,F,g=this,r=g.options,H=r.checkboxes,A=H.template,M=g.getInstanceId(),y=r.dragDropScope,P=function(){return a(this.element).clone().appendTo(I.body)},K=G?G.data(j):null,R=g._hasChildren(k),S=m.call(g,r.textTemplate,k);if(n=m(r.disabledTemplate,k),n=o(n)&&n||"true"===n||"1"===n||1===n?!0:!1,s=m(r.expandedTemplate,k),s=o(s)&&s||"true"===s||"1"===s||1===s?!0:!1,p=m(r.checkedTemplate,k),p=o(p)&&p||"true"===p||"1"===p||1===p?!0:!1,t=m(r.hrefTemplate,k),x(t)&&"undefined"!==t||(t=d),u=m(r.iconUrlTemplate,k),x(u)&&"undefined"!==u||(u=d),v=m(r.iconClsTemplate,k),x(v)&&"undefined"!==v||(v=d),h=a('<li class="'+i+" sui-unselectable"+(n?" "+q:"")+'"/>').data(j,k).data(L,Q).data(D,G).data(C,T),F=a('<span class="sui-treeview-item-text">'+(t?'<a href="'+t+'">':"")+S+(t?"</a>":"")+"</span>").on(Z,c(g._itemClick,g,h)).on(Y,c(g._itemDblClick,g,h)),J=a('<span class="sui-treeview-item-toggle"/>').on(B,c(g._toggleItem,g,h)).append(a('<span class="sui-treeview-item-toggle-collapsed"/>')),R||J.css(z,O),H.enabled)if(h.data(l,!!p),w=a('<span class="sui-treeview-item-check"/>'),x(A))w.html(m(A,{item:k,parent:K}));else if(e(A))A(w,k,K);else{var N=a('<input type="checkbox"'+(p?' checked="checked"':"")+"/>").appendTo(w);b.ui.CheckBox?a(N).shieldCheckBox({enabled:!n,enableThreeStates:!!H.children,events:{click:c(g._checkboxClick,g,h)}}):N.on(B,c(g._checkboxClick,g,h))}return(u||v)&&(E=a('<span class="sui-treeview-item-icon"/>'),u?E.append('<img src="'+u+'"/>'):E.addClass(v)),h.append(a('<div class="sui-treeview-item-content"/>').append(J,w,F.prepend(E))),h.append(a('<ul class="sui-treeview-list sui-treeview-item-list"/>').hide()),r.dragDrop&&!n&&(F.shieldDraggable({scope:f(y)?y:"suiTv"+M,dragCls:"sui-treeview-item-text-dragging",helper:P,events:{start:c(g._dragStart,g,h),stop:c(g._dragStop,g,h)}}),F.shieldDroppable({scope:f(y)?y:"suiTv"+M,hoverCls:"sui-treeview-item-text-dropover",tolerance:{x:"touch",y:"intersect"},events:{over:c(g._dropOver,g,h),out:c(g._dropOut,g,h),drop:c(g._drop,g,h)}})),{listItem:h,itemExpanded:s,itemChecked:p,itemDisabled:n}},_isValidDragDrop:function(c,d){if(a(c).hasClass("sui-treeview-item-text")){var b=a(c).parent().parent().parent().parent().children(".sui-treeview-item-content").first().children(".sui-treeview-item-text").first();return b&&b.length>0&&d[0]===b[0]?d[0]!==b[0]:a(c).parent().parent().find(d[0]).length>0?!1:!0}return!1},_dragStart:function(b,a){this.trigger("dragStart",{draggable:a.target.element,element:b,domEvent:a})},_dragStop:function(b,a){this.trigger("dragStop",{draggable:a.target.element,element:b,domEvent:a}),a.preventDefault()},_dropOver:function(h,b){var c,d=b.draggable,e=b.droppable,g=this._isValidDragDrop(d,e),f={draggable:d,droppable:e,element:h,valid:g,domEvent:b};g&&(f.sourceNode=a(d).closest("."+i)),f.targetNode=a(e).closest("."+i),c=this.trigger("droppableOver",f),(c.isDefaultPrevented()||!c.valid)&&b.preventDefault()},_dropOut:function(g,b){var h,c=b.draggable,d=b.droppable,f=this._isValidDragDrop(c,d),e={draggable:c,droppable:d,element:g,valid:f,domEvent:b};f&&(e.sourceNode=a(c).closest("."+i)),e.targetNode=a(d).closest("."+i),h=this.trigger("droppableOut",e)},_drop:function(j,b){var c,h=this,d=b.draggable,e=b.droppable,f=h._isValidDragDrop(d,e),g={draggable:d,droppable:e,element:j,cancelled:!0,skipAnimation:!!f,valid:f,domEvent:b};f&&(g.sourceNode=a(d).closest("."+i)),g.targetNode=a(e).closest("."+i),c=h.trigger("drop",g),b.cancelled=c.cancelled,b.skipAnimation=c.skipAnimation,c.isDefaultPrevented()&&b.preventDefault()},_hasChildren:function(b){var a=m(this.options.hasChildrenTemplate,b);return o(a)&&a||"true"===a||"1"===a||1===a},_isLoaded:function(b){return a(b).data(t)===!0},_isExpanded:function(a){return a.hasClass(r)},_isFullyExpanded:function(b){var a=this,c=a.getParent(b);return c?a._isExpanded(b)&&a._isFullyExpanded(c):a._isExpanded(b)},_isDisabled:function(b){return a(b).hasClass(q)},_isSelected:function(b){return a(b).hasClass(A)},_isActive:function(b){return a(b).hasClass(E)},_isFocused:function(){return a(this.element).hasClass("sui-treeview-focus")},_focus:function(d){var b=this,c=b.element;v.ie&&I.activeElement!==a(c)[0]&&a(c).focus(),b._blurTimeout&&(clearTimeout(b._blurTimeout),b._blurTimeout=null),b._isFocused()||(a(b.element).addClass("sui-treeview-focus"),b.trigger(S))},_blur:function(c){var b=this;b._isFocused()&&(b._blurTimeout&&clearTimeout(b._blurTimeout),b._blurTimeout=setTimeout(function(){a(b.element).removeClass("sui-treeview-focus"),b.trigger(R)},100))},_selectItem:function(a,e,c){var d,b=this;b._isSelected(a)||c&&(d=b.trigger("select",{element:a,item:a.data(j)}),d.isDefaultPrevented())||(b._selectedItem&&b._selectedItem.removeClass(A),b._selectedItem=a,a.addClass(A),e&&b._activateItem(a,c))},_activateItem:function(a,c){var b=this;b._isActive(a)||(b._activeItem&&b._activeItem.removeClass(E),b._activeItem=a,a.addClass(E),c&&b.trigger(s,{element:a,item:a.data(j)}))},_itemClick:function(b,d){var a=this;v.ie&&setTimeout(c(a._focus,a)),a._selectItem(b,!0,!0)},_itemDblClick:function(a,c){var b=this;b._selectItem(a,!0,!0),b._toggleItem(a,c)},_getCheckBox:function(a){return a.children(".sui-treeview-item-content").children(".sui-treeview-item-check").find('input[type="checkbox"]').first()},_checkboxClick:function(b){var a=this;v.ie&&setTimeout(c(a._focus,a)),a._toggleCheck(b,!0)},_toggleCheck:function(a,b){this._setChecked(a,!a.data(l),b)},_setChecked:function(c,d,f){var e=this,g=e.options.checkboxes.children,b=e._getCheckBox(c);b&&b.length>0&&(a(b).swidget("CheckBox")?(b=a(b).swidget("CheckBox"),b.checked(d)):d?b.attr(h,h):b.removeAttr(h),c.data(l,d),g&&e._updateChecked(c),f&&e.trigger("check",{element:c,item:c.data(j),checked:d}))},_updateChecked:function(a){var b=this,c=a.data(l);b._updateCheckedChildren(a,c),b._updateCheckedParents(a,c)},_updateCheckedChildren:function(d,b){var c=this;a(d).children("ul.sui-treeview-item-list").first().children(g).each(function(){var e=a(this),d=c._getCheckBox(e);a(d).swidget("CheckBox")?a(d).swidget("CheckBox").checked(b):b?d.attr(h,h):d.removeAttr(h),e.data(l,b),c._updateCheckedChildren(e,b)})},_updateCheckedParents:function(j,f){var c,i=this,b=i.getParent(j),k=b?b.data(l):d,e=f;b&&k!==!1&&(a(j).parent().children(g).each(function(){return a(this).data(l)!==f?(e=null,!0):void 0}),c=i._getCheckBox(b),a(c).swidget("CheckBox")?a(c).swidget("CheckBox").checked(e):e?c.attr(h,h):c.removeAttr(h),b.data(l,e),i._updateCheckedParents(b,f))},_toggleItem:function(b,d){var a=this;v.ie&&setTimeout(c(a._focus,a)),a._isDisabled(b)||(a._isExpanded(b)?a._collapse(b,!0):a._expand(b,!0,!1))},_getToggleEl:function(b){return a(b).children(".sui-treeview-item-content").first().children(".sui-treeview-item-toggle").first()},_expand:function(b,n,k,f){var h,i,l,c=this,m=c.options.animation,d=b.children("ul.sui-treeview-item-list").first();if(d&&!(a(d).length<=0)&&(c.hasChildren(b)||!(d.children(g).length<=0)))return c._isExpanded(b)?void(e(f)&&f.call(c)):void(n&&(l=c.trigger("expand",{element:b,item:b.data(j)}),l.isDefaultPrevented())||(d.stop(!0,!0),d.hide(),h=c._getToggleEl(b),i=function(){d.slideDown(m.enabled&&!k?m.expandDuration:0,function(){b.addClass(r),h.css(z,J),a(h).find("span").addClass("sui-treeview-item-toggle-expanded").removeClass("sui-treeview-item-toggle-collapsed"),e(f)&&f.call(c)})},c._isLoaded(b)?i():c._loadItem(b,k,i)))},_loadItem:function(b,m,f){var c,d=this,h=b.data(j),g=b.children("ul.sui-treeview-item-list").first(),l=b.data(C),i=d._getToggleEl(b),k=h.items||h.children;!g||a(g).length<=0||(n(k)||T(k)||k instanceof w?(a(i).addClass(u),c=w.create(k),g.data(y,c),c.on(s+d._eventNS,function(h){a(i).removeClass(u),b.data(t,!0),d._renderItems(this,g,b,!0,m,function(){d.trigger("dataBound",{dataSource:c,element:b}),e(f)&&f.call(d)})}),c.read({parent:h})):l&&l instanceof Q?(a(i).addClass(u),c=new Q(l.options),g.data(y,c),c.on(s+d._eventNS,function(h){a(i).removeClass(u),b.data(t,!0),d._renderItems(this,g,b,!0,m,function(){d.trigger("dataBound",{dataSource:c,element:b}),e(f)&&f.call(d)})}),c.read({parent:h})):(b.data(t,!0),e(f)&&f.call(d)))},_expandPathSegment:function(b,f,g,c,d){var i,h,a=this,j=b.length;return c>j?void(e(d)&&d.call(a)):(i=[].slice.call(b).splice(0,c),h=a.getByPath(i),void(a._isExpanded(h)?a._expandPathSegment(b,f,g,c+1,d):a._expand(h,f,g,function(){a._expandPathSegment(b,f,g,c+1,d)})))},_expandPath:function(a,b,c,d){this._expandPathSegment(a,b,c,1,d)},_collapse:function(b,h){var e,f,c=this,g=c.options.animation,d=b.children("ul.sui-treeview-item-list").first();!c._isExpanded(b)||!d||a(d).length<=0||h&&(f=c.trigger("collapse",{element:b,item:b.data(j)}),f.isDefaultPrevented())||(e=c._getToggleEl(b),d.stop(!0,!0),d.slideUp(g.enabled?g.collapseDuration:0,function(){b.removeClass(r),a(e).find("span").removeClass("sui-treeview-item-toggle-expanded").addClass("sui-treeview-item-toggle-collapsed")}))},_keydown:function(b){var a=this,c=!0;switch(b.keyCode){case p.UP:a._move(N,b);break;case p.DOWN:a._move(M,b);break;case p.LEFT:a._move(U,b);break;case p.RIGHT:a._move(X,b);break;case p.SPACE:a._selectedItem&&a._toggleCheck(a._selectedItem,!0);break;case p.ENTER:a._selectedItem&&a._activateItem(a._selectedItem,!0);break;default:c=!1}c&&b.preventDefault()},_getExpandedItems:function(c){var b=this;return b.element.children("."+i).add(b.element.find("li.sui-treeview-item-list-expanded > ul.sui-treeview-list > li."+i)).filter(function(){var c=b.getParent(a(this));return!c||b._isFullyExpanded(c)}).not("."+q)},_getNextItem:function(d){var b=this._getExpandedItems(),e=a(b).length,c=a(b).index(d);return e-1>c?a(a(b).get(c+1)):void 0},_getPrevItem:function(d){var b=this._getExpandedItems(),c=a(b).index(d);return c>0?a(a(b).get(c-1)):void 0},_getPrevParentItem:function(d){var c=this,b=c.getParent(d);return b&&a(b).length>0?c._isDisabled(b)?c._getPrevParentItem(b):b:void 0},_move:function(e,i){var h,d,b=this,c=b._selectedItem;b.getParent(a(c));if(f(c))if(e===N)d=b._getPrevItem(c);else if(e===M)d=b._getNextItem(c);else if(e===U){if(b._isExpanded(c))return void b._collapse(c,!0,!1);d=b._getPrevParentItem(c)}else{if(!b._isExpanded(c))return void b._expand(c,!0,!1);h=a(c).children("ul.sui-treeview-list").first(),h.length>0&&(d=a(h).children("li:not(."+q+")").first())}else d=a(b.element).find(g).first();f(d)&&a(d).length>0&&b._selectItem(d,!1,!0)},_getByPath:function(b,c){var e=this,d=b.shift(),f=a(c.children(g)[d]);return b.length>0?e._getByPath(b,f.children(k)):a(c.children(g)[d])},_getListItem:function(b){return a(n(b)?this.getByPath(b,this.element):b)},getByPath:function(b){return this._getByPath([].slice.call(b),a(this.element))},isLoaded:function(b){return a(this._getListItem(b)).data(t)===!0},hasChildren:function(a){return this._hasChildren(this.getItem(a))},getItem:function(b){return a(this._getListItem(b)).data(j)},getDataSource:function(b){return a(this._getListItem(b)).data(C)},getChildrenDataSource:function(e){var b=this,c=b._getListItem(e);return b.hasChildren(b.getItem(c))&&b.isLoaded(c)?a(c).children("ul.sui-treeview-item-list").first().data(y):d},getParent:function(b){return a(this._getListItem(b)).data(D)},getDataSourceIndex:function(b){return a(this._getListItem(b)).data(L)},_getIndex:function(b){var c=this._getListItem(b);return a(c).index()},getPath:function(e){var c=this,b=a(e),d=[];do d.unshift(c._getIndex(b)),b=c.getParent(b);while(b&&b.length>0);return d},updateIndetermined:function(d){var b=this,c=b._getListItem(d);f(c)?b._updateChecked(a(c)):a(b.element).children(g).each(function(){b._updateChecked(a(this))})},expanded:function(){var a=this,b=[].slice.call(arguments),g=o(b[0])?b.shift():d,c=b[0],e=a._getListItem(c);return f(g)?void(g?n(c)?a._expandPath([].slice.call(c),!1,!1,b[1]):a._expand(e,!1,!1,b[1]):a._collapse(e,!1)):a._isExpanded(e)},selected:function(){var a,b=this,c=[].slice.call(arguments);return c.length>0?(a=b._getListItem(c[0]),void(a&&a.length>0&&b._selectItem(a,!0,!1))):b._selectedItem},enabled:function(){var e=this,c=[].slice.call(arguments),g=o(c[0])?c.shift():d,b=e._getListItem(c[0]);if(b&&!(a(b).length<=0))return f(g)?void(g?b.removeClass(q):b.addClass(q)):!e._isDisabled(b)},checked:function(){var e=this,c=[].slice.call(arguments),g=o(c[0])?c.shift():d,b=e._getListItem(c[0]);if(b&&!(a(b).length<=0))return f(g)?void e._setChecked(b,g,!1):b.data(l)},_insertedItem:function(b,c){return b instanceof a?a(b):n(b)?this._getListItem(b):T(b)?this._renderItem(b,c).listItem:void 0},_beforeRemoveChild:function(b){var c=this;b&&b.children(k).children(g).length<=1&&(a(c._getToggleEl(b)).css(z,O),b.removeClass(r))},_refreshParent:function(c){var b=a(c).parents(g).first();a(c).data(D,b&&b.length>0?b:null)},load:function(c,d){var b=this,a=b._getListItem(c);a&&a.length>0&&b._loadItem(a,!1,d)},append:function(){var c,d,h,b=this,i=[].slice.call(arguments),j=i[0],m=n(j)||j instanceof a,l=i[1],g=i[2];if(f(l)){if(d=b._getListItem(l),!(d&&a(d).length>0))return;h=a(d).children(k).first()}else d=null,h=b.element;c=b._insertedItem(j,d),c&&(m&&b._beforeRemoveChild(b.getParent(c)),!d||b._isExpanded(d)?(c.appendTo(h),b._refreshParent(c),e(g)&&g.call(b,c)):b.hasChildren(d)?b._isExpanded(d)?(c.appendTo(h),b._refreshParent(c),e(g)&&g.call(b,c)):b._expand(d,!1,!1,function(){c.appendTo(h),b._refreshParent(c),e(g)&&g.call(b,c)}):b._isExpanded(d)?(c.appendTo(h),b._refreshParent(c),e(g)&&g.call(b,c)):(a(b._getToggleEl(d)).css(z,J),d.removeClass(r),c.appendTo(h),b._refreshParent(c),b._expand(d,!1,!1,function(){e(g)&&g.call(b,c)})))},insertBefore:function(){var c,b=this,f=[].slice.call(arguments),e=f[0],g=n(e)||e instanceof a,d=b._getListItem(f[1]);return d&&d.length>0&&(c=b._insertedItem(e,b.getParent(d)))?(g&&b._beforeRemoveChild(b.getParent(c)),c.insertBefore(d),b._refreshParent(c),c):void 0},insertAfter:function(){var c,b=this,f=[].slice.call(arguments),e=f[0],g=n(e)||e instanceof a,d=b._getListItem(f[1]);return d&&d.length>0&&(c=b._insertedItem(e,b.getParent(d)))?(g&&b._beforeRemoveChild(b.getParent(c)),c.insertAfter(d),b._refreshParent(c),c):void 0},remove:function(d){var c=this,e=n(d)||d instanceof a,b=c._getListItem(d);c.getParent(b);return b&&b.length>0?(c._destroyItems(a(b).children(k).first()),e&&c._beforeRemoveChild(c.getParent(b)),b.remove(),!0):!1},destroy:function(){var b=this,c=b.element,d=b._eventNS;b.dataSource&&b.dataSource.off(s+d),b._destroyItems(c),b._blurTimeout&&(clearTimeout(b._blurTimeout),b._blurTimeout=null),a(c).off(d).remove(),b._original.unwrap(),b._original.show(),b._original=b._wrapper=b._selectedItem=b._activeItem=null,F.fn.destroy.call(b)}}),G.defaults=K,b.ui.plugin("TreeView",G)}(jQuery,shield,this);